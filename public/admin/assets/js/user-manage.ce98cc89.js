(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-manage"],{"7f34":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-manage-container"},[a("h4",{staticClass:"title"},[e._v("用户管理")]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增用户")])],1),a("div",{staticClass:"content"},[a("el-table",{attrs:{data:e.users,width:"calc(100vw - 250px - 40px)",stripe:""}},[a("el-table-column",{attrs:{prop:"createdAt",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.calcLoginTime(t.row.createdAt))+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"realName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"role",label:"角色"}}),a("el-table-column",{attrs:{prop:"options",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleDelConfirm(t.row.id)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"30px"},attrs:{background:"","current-page":e.page,"page-size":10,layout:"prev, pager, next",total:e.count},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增用户",visible:e.dialogFormVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"用户名称","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":"120px"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1),a("el-form-item",{attrs:{label:"角色","label-width":"120px"}},[a("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("el-option",{attrs:{label:"管理员",value:"admin"}}),a("el-option",{attrs:{label:"用户",value:"user"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1)],1)},n=[],r={name:"user-manage-page",data:function(){return{users:[],count:0,page:1,dialogFormVisible:!1,form:{username:"",realName:"",password:"",role:void 0}}},mounted:function(){this.getUsers()},methods:{handleAdd:function(){var e=this;this.$http({url:"/common/user/create",method:"POST",data:this.form}).then((function(t){0===t.data.code?(e.form={username:"",realName:"",password:"",role:void 0},e.dialogFormVisible=!1,e.page=1,e.count=0,e.getUsers()):e.$message({type:"error",message:t.data.msg})}))},handleDel:function(e){var t=this;this.$http({method:"POST",data:{id:e},url:"/common/user/delete"}).then((function(e){0===e.data.code?(t.$message({type:"success",message:"删除成功"}),t.page=1,t.count=0,t.getUsers()):t.$message({type:"error",message:e.data.msg})}))},handleDelConfirm:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.handleDel(e)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleCurrentChange:function(e){this.page=e,this.getUsers()},calcLoginTime:function(e){if(e){var t=new Date(e),a=function(e){var t=e+"";return t.length<2?"0"+t:t};return"".concat(a(t.getMonth()+1),"月").concat(a(t.getDate()),"日  ").concat(a(t.getHours()),":").concat(a(t.getMinutes()))}},getUsers:function(){var e=this;this.$http({method:"GET",url:"/common/users",params:{page:this.page}}).then((function(t){0===t.data.code&&(e.users=t.data.data.list,e.count=t.data.data.totalCount)}))}}},l=r,s=(a("a08a"),a("2877")),i=Object(s["a"])(l,o,n,!1,null,"1739e42d",null);t["default"]=i.exports},a08a:function(e,t,a){"use strict";var o=a("a0da"),n=a.n(o);n.a},a0da:function(e,t,a){}}]);
//# sourceMappingURL=user-manage.ce98cc89.js.map